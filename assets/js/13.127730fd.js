(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{195:function(a,s,t){"use strict";t.r(s);var e=t(0),r=Object(e.a)({},function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"docker数据卷"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker数据卷","aria-hidden":"true"}},[a._v("#")]),a._v(" Docker数据卷")]),a._v(" "),t("h2",{attrs:{id:"概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#概述","aria-hidden":"true"}},[a._v("#")]),a._v(" 概述")]),a._v(" "),t("p",[a._v("数据卷是一个可以供一个或多个容器使用的特殊目录。")]),a._v(" "),t("p",[a._v("可以达到以下目的：")]),a._v(" "),t("ol",[t("li",[a._v("绕过“拷贝写”系统，以达到本地磁盘 IO 的性能，（比如运行一个容器，在容器中对数据卷修改内容，会直接改变宿主机上的数据卷中的内容，所以是本地磁盘IO的性能，而不是先在容器中写一份，最后还要将容器中的修改的内容拷贝出来进行同步。）")]),a._v(" "),t("li",[a._v("绕过“拷贝写”系统，有些文件不需要在 "),t("code",[a._v("docker commit")]),a._v(" 打包进镜像文件。")]),a._v(" "),t("li",[a._v("在多个容器间共享目录。")]),a._v(" "),t("li",[a._v("在宿主和容器间共享目录。")]),a._v(" "),t("li",[a._v("在宿主和容器间共享一个文件。")])]),a._v(" "),t("h2",{attrs:{id:"创建数据卷"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建数据卷","aria-hidden":"true"}},[a._v("#")]),a._v(" 创建数据卷")]),a._v(" "),t("p",[a._v("方法一："),t("code",[a._v("dockerfile")]),a._v(" 中指定 VOLUME 后的目录，如 "),t("code",[a._v("VOLUME /var/lib/test")])]),a._v(" "),t("p",[a._v("方法二："),t("code",[a._v("docker run")]),a._v(" 命令中加 "),t("code",[a._v("-v")]),a._v(" 选项。如：")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker run -d -P -v /webapp training/webapp python app.py\n")])])]),t("p",[t("strong",[a._v("注意：")]),a._v(" 这里定义的 "),t("code",[a._v("/webapp")]),a._v(" 数据卷，但是不知道宿主机上与之对应的在哪里。我们需要仔细的观察 "),t("code",[a._v("docker inspect")]),a._v(" 的结果，是非常长的一段东西。在这里我只摘出我们需要的部分：")]),a._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"Mounts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"Type"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"volume"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"Name"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"ae15b45565ac99bc8f770b226684f7ef707eb8a4d9b8111a0e6b8410ab7b7942"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"Source"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/var/lib/docker/volumes/ae15b45565ac99bc8f770b226684f7ef707eb8a4d9b8111a0e6b8410ab7b7942/_data"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"Destination"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/webapp"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"Driver"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"local"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"Mode"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('""')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"RW"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"Propagation"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('""')]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"Volumes"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"/webapp"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[t("strong",[a._v("注意：")]),a._v(" 这里 “Name”: “ae15b45565ac99bc8f770b226684f7ef707eb8a4d9b8111a0e6b8410ab7b7942”，这个并不是容器 id 而是数据卷的 ID，我们可以在 "),t("code",[a._v("/var/lib/docker/volumes/")]),a._v(" 下找到名子为这个数字的目录。它就是我们数据卷在宿主机上对应的目录。")]),a._v(" "),t("p",[a._v("使用命令创建数据卷：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ docker volume create my-vol\n")])])]),t("p",[a._v("查看所有的 "),t("code",[a._v("数据卷")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ docker volume "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v("\n\nlocal               my-vol\n")])])]),t("p",[a._v("在主机里使用以下命令可以查看指定 "),t("code",[a._v("数据卷")]),a._v(" 的信息")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ docker volume inspect my-vol\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Driver"')]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"local"')]),a._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Labels"')]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Mountpoint"')]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/var/lib/docker/volumes/my-vol/_data"')]),a._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Name"')]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"my-vol"')]),a._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Options"')]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Scope"')]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"local"')]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("h2",{attrs:{id:"使用数据卷"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用数据卷","aria-hidden":"true"}},[a._v("#")]),a._v(" 使用数据卷")]),a._v(" "),t("p",[a._v("在用 "),t("code",[a._v("docker run")]),a._v(" 命令的时候，使用 "),t("code",[a._v("--mount")]),a._v(" 标记来将 "),t("code",[a._v("数据卷")]),a._v(" 挂载到容器里。在一次 "),t("code",[a._v("docker run")]),a._v("中可以挂载多个 "),t("code",[a._v("数据卷")]),a._v("。")]),a._v(" "),t("p",[a._v("下面创建一个名为 "),t("code",[a._v("web")]),a._v(" 的容器，并加载一个 "),t("code",[a._v("数据卷")]),a._v(" 到容器的 "),t("code",[a._v("/webapp")]),a._v(" 目录。")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ docker run -d -P \\\n    --name web \\\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# -v my-vol:/wepapp \\")]),a._v("\n    --mount source"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("my-vol,target"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/webapp \\\n    training/webapp \\\n    python app.py\n")])])]),t("h2",{attrs:{id:"查看数据卷"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看数据卷","aria-hidden":"true"}},[a._v("#")]),a._v(" 查看数据卷")]),a._v(" "),t("p",[a._v("在主机里使用以下命令可以查看 "),t("code",[a._v("web")]),a._v(" 容器的信息")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ docker inspect web\n")])])]),t("p",[t("code",[a._v("数据卷")]),a._v(' 信息在 "Mounts" Key 下面')]),a._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"Mounts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"Type"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"volume"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"Name"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"my-vol"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"Source"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/var/lib/docker/volumes/my-vol/_data"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"Destination"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/app"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"Driver"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"local"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"Mode"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('""')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"RW"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"Propagation"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('""')]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("h2",{attrs:{id:"数据卷容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据卷容器","aria-hidden":"true"}},[a._v("#")]),a._v(" 数据卷容器")]),a._v(" "),t("p",[a._v("专门用于挂载数据卷的容器，供其他容器引用，多用于多个容器需要共享同一段数据。用法："),t("code",[a._v("–volumes-from")]),a._v("。具体是先创建一个数据卷容器，在创建一个新的容器来引用数据卷容器。")]),a._v(" "),t("p",[a._v("创建一个数据卷容器：")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker run --name mysql -v /var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 -d mysql\n")])])]),t("p",[a._v("创建一个名为 db1 的容器并引用 mysql 容器：")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker run --name db1 --volumes-from mysql -e MYSQL_ROOT_PASSWORD=123456 -d mysql\n")])])]),t("p",[a._v("使用 "),t("code",[a._v('docker inspect 容器 |grep "Source"')]),a._v(" 查看容器的数据卷")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ docker inspect db1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Source"')]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Source"')]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/var/lib/docker/volumes/0eed635d622e2287ef13c96c387e046a854293f242c0e514933ad542ecee1f84/_data"')]),a._v(",\n     "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Source"')]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/var/lib/docker/volumes/6f663f4e1d87bacd5c3d20784eac537523350b4cdd03f84bae963aa5a258ccb1/_data"')]),a._v(",\n                \n$ docker inspect mysql "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Source"')]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Source"')]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/var/lib/docker/volumes/0eed635d622e2287ef13c96c387e046a854293f242c0e514933ad542ecee1f84/_data"')]),a._v(",\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Source"')]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/var/lib/docker/volumes/6f663f4e1d87bacd5c3d20784eac537523350b4cdd03f84bae963aa5a258ccb1/_data"')]),a._v(",\n")])])]),t("p",[a._v("可见这两个容器共享一个数据卷。")]),a._v(" "),t("h2",{attrs:{id:"备份数据卷"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#备份数据卷","aria-hidden":"true"}},[a._v("#")]),a._v(" 备份数据卷")]),a._v(" "),t("p",[a._v("这其实是利用 "),t("code",[a._v("tar")]),a._v(" 命令来执行的。")]),a._v(" "),t("p",[a._v("备份的原理：使用 "),t("code",[a._v("tar -zcvf")]),a._v(" 对数据卷打包压缩")]),a._v(" "),t("p",[a._v("创建一个 MySQL 容器：")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker run -p 3306:3306 --name mysql \\\n-v /data/docker/mysql/conf:/etc/mysql \\\n-v /data/docker/mysql/logs:/var/log/mysql \\\n-v /data/docker/mysql/data:/var/lib/mysql \\\n-e MYSQL_ROOT_PASSWORD=123456 \\\n-d mysql\n")])])]),t("p",[a._v("进入 "),t("code",[a._v("/data/docker/mysql")]),a._v(" 目录，使用 "),t("code",[a._v("tar -zxvf backup.tar.gz .")]),a._v(" 打包当前目录，即可得到一个压缩包，这个压缩包就是我们需要的备份数据。")]),a._v(" "),t("h2",{attrs:{id:"恢复数据卷"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#恢复数据卷","aria-hidden":"true"}},[a._v("#")]),a._v(" 恢复数据卷")]),a._v(" "),t("p",[a._v("解压缩备份数据压缩包")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("tar -zxvf backup.tar.gz\n")])])]),t("p",[a._v("重新启动一个新的容器并将数据卷指向需要还原的数据卷目录")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker run -p 3306:3306 --name mysql \\\n-v /data/docker/mysql/backup/conf:/etc/mysql \\\n-v /data/docker/mysql/backup/logs:/var/log/mysql \\\n-v /data/docker/mysql/backup/data:/var/lib/mysql \\\n-e MYSQL_ROOT_PASSWORD=123456 \\\n-d mysql\n")])])]),t("h2",{attrs:{id:"删除数据卷"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除数据卷","aria-hidden":"true"}},[a._v("#")]),a._v(" 删除数据卷")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ docker volume "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" my-vol\n")])])]),t("p",[t("code",[a._v("数据卷")]),a._v(" 是被设计用来持久化数据的，它的生命周期独立于容器，Docker 不会在容器被删除后自动删除 "),t("code",[a._v("数据卷")]),a._v("，并且也不存在垃圾回收这样的机制来处理没有任何容器引用的 "),t("code",[a._v("数据卷")]),a._v("。如果需要在删除容器的同时移除数据卷。可以在删除容器的时候使用 "),t("code",[a._v("docker rm -v")]),a._v(" 这个命令。")]),a._v(" "),t("p",[a._v("无主的数据卷可能会占据很多空间，要清理请使用以下命令")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ docker volume prune\n")])])])])},[],!1,null,null,null);s.default=r.exports}}]);