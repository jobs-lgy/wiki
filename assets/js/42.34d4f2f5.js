(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{224:function(a,t,s){"use strict";s.r(t);var e=s(0),r=Object(e.a)({},function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"rabbitmq-安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rabbitmq-安装","aria-hidden":"true"}},[a._v("#")]),a._v(" RabbitMQ 安装")]),a._v(" "),s("h2",{attrs:{id:"yum安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#yum安装","aria-hidden":"true"}},[a._v("#")]),a._v(" yum安装")]),a._v(" "),s("h3",{attrs:{id:"yum安装erlang"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#yum安装erlang","aria-hidden":"true"}},[a._v("#")]),a._v(" yum安装erlang")]),a._v(" "),s("p",[a._v("配置yum源：")]),a._v(" "),s("div",{staticClass:"language-properties extra-class"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[a._v("[rabbitmq_erlang]\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("rabbitmq_erlang")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("baseurl")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("https://packagecloud.io/rabbitmq/erlang/el/7/$basearch")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("repo_gpgcheck")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("1")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("gpgcheck")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("0")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("enabled")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("1")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("gpgkey")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("https://packagecloud.io/rabbitmq/erlang/gpgkey")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("sslverify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("1")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("sslcacert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("/etc/pki/tls/certs/ca-bundle.crt")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("metadata_expire")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("300")]),a._v("\n")])])]),s("p",[a._v("安装erlang")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("yum install erlang\n")])])]),s("h3",{attrs:{id:"安装rabbitmq"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装rabbitmq","aria-hidden":"true"}},[a._v("#")]),a._v(" 安装RabbitMQ")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rpm")]),a._v(" -ivh rabbitmq-server-3.4.1-1.noarch.rpm\n")])])]),s("p",[a._v("或者从yum安装：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("yum install rabbitmq-server\n")])])]),s("h3",{attrs:{id:"修改配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修改配置文件","aria-hidden":"true"}},[a._v("#")]),a._v(" 修改配置文件")]),a._v(" "),s("p",[a._v("将配置文件模板复制到etc目录：")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" /usr/share/doc/rabbitmq-server-3.4.1/rabbitmq.config.example /etc/rabbitmq/rabbitmq.config\n")])])]),s("p",[a._v("通过vim命令编辑：")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" /etc/rabbitmq/rabbitmq.config\n")])])]),s("h3",{attrs:{id:"设置开机启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置开机启动","aria-hidden":"true"}},[a._v("#")]),a._v(" 设置开机启动")]),a._v(" "),s("p",[a._v("输入下面命令")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("chkconfig")]),a._v(" rabbitmq-server on\n")])])]),s("h3",{attrs:{id:"启动命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动命令","aria-hidden":"true"}},[a._v("#")]),a._v(" 启动命令")]),a._v(" "),s("p",[a._v("通过下面命令来控制RabbitMQ：")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("service")]),a._v(" rabbitmq-server start\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("service")]),a._v(" rabbitmq-server stop\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("service")]),a._v(" rabbitmq-server restart\n")])])]),s("h3",{attrs:{id:"开启web管理界面"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开启web管理界面","aria-hidden":"true"}},[a._v("#")]),a._v(" 开启web管理界面")]),a._v(" "),s("p",[a._v("RabbitMQ提供了用来管理的控制界面，十分方便，不过默认是关闭的。")]),a._v(" "),s("p",[a._v("我们通过命令开启web管理插件：")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("rabbitmq-plugins "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("enable")]),a._v(" rabbitmq_management\n")])])]),s("p",[a._v("然后重启RabbitMQ：")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("service")]),a._v(" rabbitmq-server restart\n")])])]),s("h3",{attrs:{id:"开放端口"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开放端口","aria-hidden":"true"}},[a._v("#")]),a._v(" 开放端口")]),a._v(" "),s("p",[a._v("RabbitMQ默认使用15672端口进行web访问，我们开启防火墙端口：")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("/sbin/iptables -I INPUT -p tcp --dport 15672 -j ACCEPT\n\n/etc/rc.d/init.d/iptables save\n")])])]),s("p",[a._v("然后在主机中通过地址：http://192.168.56.100:15672即可访问到管理界面")]),a._v(" "),s("h2",{attrs:{id:"docker-compose安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose安装","aria-hidden":"true"}},[a._v("#")]),a._v(" Docker-compose安装")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("version: '3.1'\nservices:\n  rabbitmq:\n    restart: always\n    image: rabbitmq:management\n    container_name: rabbitmq\n    ports:\n      - 5672:5672\n      - 15672:15672\n    environment:\n      TZ: Asia/Shanghai\n      RABBITMQ_DEFAULT_USER: rabbit\n      RABBITMQ_DEFAULT_PASS: 123456\n    volumes:\n      - /data/docker/rabbitmq/data:/var/lib/rabbitmq\n")])])]),s("h2",{attrs:{id:"管理界面介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#管理界面介绍","aria-hidden":"true"}},[a._v("#")]),a._v(" 管理界面介绍")]),a._v(" "),s("p",[a._v("第一次访问需要登录，默认的账号密码为："),s("code",[a._v("guest/guest")]),a._v("，如果使用docker-compose安装，则用户名密码为rabbit/123456")]),a._v(" "),s("h3",{attrs:{id:"主页"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#主页","aria-hidden":"true"}},[a._v("#")]),a._v(" 主页")]),a._v(" "),s("p",[s("img",{attrs:{src:"http://ww2.sinaimg.cn/large/006tNc79gy1g5a7omiy38j30nq0dawf9.jpg",alt:"1527067075616"}})]),a._v(" "),s("ul",[s("li",[a._v("connections：无论生产者还是消费者，都需要与RabbitMQ建立连接后才可以完成消息的生产和消费，在这里可以查看连接情况")]),a._v(" "),s("li",[a._v("channels：通道，建立连接后，会形成通道，消息的投递获取依赖通道。")]),a._v(" "),s("li",[a._v("Exchanges：交换机，用来实现消息的路由")]),a._v(" "),s("li",[a._v("Queues：队列，即消息队列，消息存放在队列中，等待消费，消费后被移除队列。")])]),a._v(" "),s("p",[a._v("端口：")]),a._v(" "),s("p",[a._v("​     "),s("img",{attrs:{src:"http://ww2.sinaimg.cn/large/006tNc79gy1g5a7py5rd2j30hx0axt9a.jpg",alt:"img"}})]),a._v(" "),s("h3",{attrs:{id:"创建虚拟主机"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建虚拟主机","aria-hidden":"true"}},[a._v("#")]),a._v(" 创建虚拟主机")]),a._v(" "),s("p",[a._v("为了让各个用户可以互不干扰的工作，RabbitMQ添加了虚拟主机（Virtual Hosts）的概念。其实就是一个独立的访问路径，不同用户使用不同路径，各自有自己的队列、交换机，互相不会影响。")]),a._v(" "),s("p",[a._v("我们可以创建一个虚拟主机。例如/cshop，然后设置相应的权限。")]),a._v(" "),s("h3",{attrs:{id:"添加用户"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加用户","aria-hidden":"true"}},[a._v("#")]),a._v(" 添加用户")]),a._v(" "),s("p",[a._v("上面的Tags选项，其实是指定用户的角色，可选的有以下几个：")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("超级管理员(administrator)")]),a._v(" "),s("p",[a._v("可登陆管理控制台，可查看所有的信息，并且可以对用户，策略(policy)进行操作。")])]),a._v(" "),s("li",[s("p",[a._v("监控者(monitoring)")]),a._v(" "),s("p",[a._v("可登陆管理控制台，同时可以查看rabbitmq节点的相关信息(进程数，内存使用情况，磁盘使用情况等)")])]),a._v(" "),s("li",[s("p",[a._v("策略制定者(policymaker)")]),a._v(" "),s("p",[a._v("可登陆管理控制台, 同时可以对policy进行管理。但无法查看节点的相关信息(上图红框标识的部分)。")])]),a._v(" "),s("li",[s("p",[a._v("普通管理者(management)")]),a._v(" "),s("p",[a._v("仅可登陆管理控制台，无法看到节点信息，也无法对策略进行管理。")])]),a._v(" "),s("li",[s("p",[a._v("其他")]),a._v(" "),s("p",[a._v("无法登陆管理控制台，通常就是普通的生产者和消费者。")])])])])},[],!1,null,null,null);t.default=r.exports}}]);