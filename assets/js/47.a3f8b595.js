(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{229:function(a,t,s){"use strict";s.r(t);var e=s(0),r=Object(e.a)({},function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"安装和配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装和配置","aria-hidden":"true"}},[a._v("#")]),a._v(" 安装和配置")]),a._v(" "),s("h2",{attrs:{id:"安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装","aria-hidden":"true"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),s("h3",{attrs:{id:"docker安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker安装","aria-hidden":"true"}},[a._v("#")]),a._v(" docker安装")]),a._v(" "),s("p",[a._v("1、下载镜像")]),a._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker pull  redis\n")])])]),s("p",[a._v("2、运行容器")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("docker run -d --name redis -p 6379:6379 \\\n  -v /data/docker/redis/data:/data \\\n  -v /data/docker/redis/conf/redis.conf:/etc/redis/redis.conf \\\n  --privileged"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("true redis:latest --appendonly "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("yes")]),a._v(" --requirepass "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"123456"')]),a._v(" \n")])])]),s("blockquote",[s("p",[a._v("注意：/etc/redis/redis.conf 是个目录")])]),a._v(" "),s("p",[a._v("创建目录：")]),a._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("mkdir /data/docker/redis/data\n\nmkdir /data/docker/redis/conf\n")])])]),s("p",[a._v("创建 /data/docker/redis/conf/redis.conf")]),a._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("bind 0.0.0.0\nprotected-mode no\nport 6379\ntcp-backlog 511\ntimeout 0\ntcp-keepalive 300\n")])])]),s("p",[a._v("3、查看容器")]),a._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker ps\n")])])]),s("p",[a._v("4、开发端口")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("firewall-cmd --zone"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("public --add-port"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("6379/tcp --permanent\n")])])]),s("p",[a._v("5、进入redis-cli")]),a._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker exec -it redis redis-cli -p 6379 -a '123456'\n")])])]),s("h3",{attrs:{id:"docker-compose安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose安装","aria-hidden":"true"}},[a._v("#")]),a._v(" docker-compose安装")]),a._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'3.1'")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("services")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("db")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" redis\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("container_name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" redis\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("restart")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" always\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("command")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" redis"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("server /etc/redis/redis.conf "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("appendonly yes "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("requirepass 123456\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("ports")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" 6379"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("6379")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("volumes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" /data/docker/redis/data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("/data\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" /data/docker/redis/conf/redis.conf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("/etc/redis/redis.conf\n")])])]),s("h2",{attrs:{id:"redis-配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#redis-配置","aria-hidden":"true"}},[a._v("#")]),a._v(" Redis 配置")]),a._v(" "),s("p",[a._v("Redis 的配置文件位于 Redis 安装目录下，文件名为 "),s("strong",[a._v("redis.conf")]),a._v("。")]),a._v(" "),s("p",[a._v("你可以通过 "),s("strong",[a._v("CONFIG")]),a._v(" 命令查看或设置配置项：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('127.0.0.1:6379> config get loglevel\n1) "loglevel"\n2) "notice"\n')])])]),s("p",[a._v("使用 ***** 号获取所有配置项：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('127.0.0.1:6379> CONFIG GET *\n  1) "dbfilename"\n  2) "dump.rdb"\n  3) "requirepass"\n  4) "123456"\n  5) "masterauth"\n  6) ""\n')])])]),s("p",[a._v("可以通过修改 redis.conf 文件或使用 "),s("strong",[a._v("CONFIG set")]),a._v(" 命令来修改配置。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("redis 127.0.0.1:6379"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" CONFIG SET loglevel "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"notice"')]),a._v("\nOK\nredis 127.0.0.1:6379"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" CONFIG GET loglevel\n\n1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"loglevel"')]),a._v("\n2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"notice"')]),a._v("\n")])])]),s("p",[a._v("redis.conf 配置项说明如下：")])])},[],!1,null,null,null);t.default=r.exports}}]);